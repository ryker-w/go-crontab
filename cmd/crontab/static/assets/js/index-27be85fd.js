import{s as I}from"./index-35ac8c1e.js";import{H as _,_ as S,i as k,ah as i,ar as C,o as d,c as H,a as N,V as t,P as n,T as m,Q as j,O as u}from"./@vue-021a4eb1.js";import"./pinia-a8c871c6.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-5dc1aa30.js";import"./element-plus-f169eafc.js";import"./lodash-es-36eb724a.js";import"./@vueuse-8a759679.js";import"./@element-plus-4a2045cc.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-1798568c.js";import"./call-bind-1df9733d.js";import"./get-intrinsic-b9397c9a.js";import"./has-symbols-e8f3ca0e.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-463e90e0.js";import"./js-cookie-cf83ad76.js";import"./nprogress-5ada7e0c.js";import"./axios-707ed124.js";import"./qs-a8db372b.js";import"./side-channel-9112baf6.js";import"./object-inspect-d11bccf2.js";import"./mitt-f7ef348c.js";const T="/api/admin";function U(){return{list:c=>I({url:T+"/tasklog",method:"get",params:c})}}const B={class:"system-dic-container layout-padding"},P={class:"system-user-search mb15"},A=_({name:"systemDic"}),ge=_({...A,setup(c){const h=U(),e=S({searchField:{result:"",clientId:"",jobId:"",name:"",executorHandler:""},tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10}}}),p=()=>{e.tableData.loading=!0,h.list({result:e.searchField.result,clientId:e.searchField.clientId,jobId:e.searchField.jobId,name:e.searchField.name,executorHandler:e.searchField.executorHandler,pageNum:e.tableData.param.pageNum,pageSize:e.tableData.param.pageSize}).then(o=>{console.log(o),o.code==200&&o.items&&o.items.length>0?(e.tableData.data=o.items,e.tableData.total=o.totalPage):e.tableData.data=[]}).finally(()=>{setTimeout(()=>{e.tableData.loading=!1},500)})},f=o=>{e.tableData.param.pageSize=o,p()},w=o=>{e.tableData.param.pageNum=o,p()};return k(()=>{p()}),(o,a)=>{const s=i("el-input"),g=i("el-option"),v=i("el-select"),D=i("ele-Search"),x=i("el-icon"),z=i("el-button"),r=i("el-table-column"),b=i("el-tag"),V=i("el-table"),y=i("el-pagination"),F=C("loading");return d(),H("div",B,[N("div",P,[t(s,{modelValue:e.searchField.clientId,"onUpdate:modelValue":a[0]||(a[0]=l=>e.searchField.clientId=l),size:"default",placeholder:"客户端",style:{"max-width":"180px"}},null,8,["modelValue"]),t(s,{modelValue:e.searchField.jobId,"onUpdate:modelValue":a[1]||(a[1]=l=>e.searchField.jobId=l),size:"default",placeholder:"任务ID",style:{"max-width":"180px"}},null,8,["modelValue"]),t(s,{modelValue:e.searchField.name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.searchField.name=l),size:"default",placeholder:"任务名称",style:{"max-width":"180px"}},null,8,["modelValue"]),t(s,{modelValue:e.searchField.executorHandler,"onUpdate:modelValue":a[3]||(a[3]=l=>e.searchField.executorHandler=l),size:"default",placeholder:"任务标识",style:{"max-width":"180px"}},null,8,["modelValue"]),t(v,{modelValue:e.searchField.result,"onUpdate:modelValue":a[4]||(a[4]=l=>e.searchField.result=l),placeholder:"执行结果",clearable:"",size:"mini"},{default:n(()=>[t(g,{label:"success",value:200}),t(g,{label:"error",value:500})]),_:1},8,["modelValue"]),t(z,{size:"default",type:"primary",class:"ml10",onClick:a[5]||(a[5]=l=>p())},{default:n(()=>[t(x,null,{default:n(()=>[t(D)]),_:1}),m(" 查询 ")]),_:1})]),j((d(),u(V,{data:e.tableData.data,style:{width:"100%"}},{default:n(()=>[t(r,{type:"index",label:"序号",width:"50"}),t(r,{prop:"clientId",label:"客户端","show-overflow-tooltip":""}),t(r,{prop:"jobId",label:"任务ID","show-overflow-tooltip":""}),t(r,{prop:"name",label:"任务名称","show-overflow-tooltip":""}),t(r,{prop:"executorHandler",label:"任务标识","show-overflow-tooltip":""}),t(r,{prop:"prevTime",label:"上次执行时间","show-overflow-tooltip":""}),t(r,{prop:"nextTime",label:"下次执行时间","show-overflow-tooltip":""}),t(r,{prop:"result",label:"执行结果","show-overflow-tooltip":""},{default:n(l=>[l.row.result==200?(d(),u(b,{key:0,type:"success"},{default:n(()=>[m("Success")]),_:1})):(d(),u(b,{key:1,type:"danger"},{default:n(()=>[m("Error")]),_:1}))]),_:1}),t(r,{prop:"msg",label:"执行详情","show-overflow-tooltip":""}),t(r,{prop:"ctime",label:"创建时间","show-overflow-tooltip":""})]),_:1},8,["data"])),[[F,e.tableData.loading]]),t(y,{onSizeChange:f,onCurrentChange:w,class:"mt15","pager-count":5,"page-sizes":[10,50,100],"current-page":e.tableData.param.pageNum,"onUpdate:currentPage":a[6]||(a[6]=l=>e.tableData.param.pageNum=l),background:"","page-size":e.tableData.param.pageSize,"onUpdate:pageSize":a[7]||(a[7]=l=>e.tableData.param.pageSize=l),layout:"total, sizes, prev, pager, next, jumper","page-count":e.tableData.total},null,8,["current-page","page-size","page-count"])])}}});export{ge as default};
